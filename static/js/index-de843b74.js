import{r,g as o,F as M,j as t,u as U}from"./react-ac4fd5c4.js";import{ad as D,ae as L,U as O,af as j,D as I,t as z,r as S,b as A,c as w,K as B}from"./index-f4592ea4.js";import{ad as F,aw as G,k as P,U as H,ax as K}from"./vendor-a0dadf07.js";import{P as R}from"./index-9202063d.js";import{u as J}from"./react-redux-5a199f59.js";import"./lodash-44bc1aaf.js";import"./react-router-dom-0434928e.js";const Q=()=>{const[s,g]=r.exports.useState([]),[v,C]=r.exports.useState(),[c,y]=r.exports.useState(0),[m,d]=r.exports.useState(1),[a,n]=r.exports.useState("\u5168\u90E8");function p(u){return u.map(h=>{const{id:_,name:f,coverImgUrl:k}=h;return{id:_,name:f,imgUrl:k}})}async function i(u=1,h=100){const _=(u-1)*h,f=await D({cat:a,offset:_,limit:h});g(p(f.playlists)),y(f.total)}async function b(){const u=await O(a);C(u.playlists[0])}return r.exports.useEffect(()=>{d(1),i(),b()},[a]),{topPlaylist:s,total:c,current:m,setCurrent:d,loadTopPlaylist:i,topPlaylistHighquality:v,cat:a,setCat:n}};function V(s){const[g,v]=r.exports.useState([]),C=o(M,{children:[s==="\u5168\u90E8"?"\u5168\u90E8\u6B4C\u5355":s,t(F,{})]});return r.exports.useEffect(()=>{(async()=>{const c=await L(),y=Object.keys(c.categories).map(m=>{const d=c.categories[m],a=[],n=Number(m),p={data:a,name:d};return c.sub.forEach(i=>{i.category===n&&p.data.push(i)}),p});v(y)})()},[]),{buttonContext:C,allMusicCategory:g}}const W="_popover_1ff6m_1",X="_popover__header_1ff6m_4",Y="_popover__item_1ff6m_27",Z="_popover__left_1ff6m_35",$="_popover__right_1ff6m_43",q="_popover__label_1ff6m_48";var E={popover:W,popover__header:X,"--active":"_--active_1ff6m_19",popover__item:Y,popover__left:Z,popover__right:$,popover__label:q};const ce=()=>{const s=w("music-list"),[g,v]=r.exports.useState([]),{topPlaylist:C,total:c,current:y,setCurrent:m,loadTopPlaylist:d,topPlaylistHighquality:a,cat:n,setCat:p}=Q(),{push:i}=U(),b=J(),{buttonContext:u,allMusicCategory:h}=V(n);function _(e){i(I.list(e))}function f(e){b(B(e))}function k(e){const l=w("popover",E);function T(x){p(x),e(!1)}return o("div",{className:l(),children:[t("header",{className:l("header"),children:t("button",{className:P({[E["--active"]]:n==="\u5168\u90E8"}),onClick:()=>T("\u5168\u90E8"),children:"\u5168\u90E8\u6B4C\u5355"})}),h.map(x=>o("section",{className:l("item"),children:[o("div",{className:l("left"),children:[t(K,{}),t("span",{children:x.name})]}),t("div",{className:l("right"),children:x.data.map(N=>o("div",{className:P(l("label"),{[E["--active"]]:N.name===n}),onClick:()=>T(N.name),children:[t("span",{children:N.name}),N.hot&&t("strong",{children:"HOT"})]},N.name))})]},x.name))]})}return r.exports.useEffect(()=>{(async()=>{const e=await j();v(e.tags)})()},[]),o("div",{className:s(),children:[o("header",{className:s("banner"),onClick:()=>i(I.excellentList(n)),children:[(a==null?void 0:a.coverImgUrl)&&t("img",{src:z(S(a.coverImgUrl,300)),alt:"banner"}),o("div",{className:s("banner-right"),children:[o("button",{children:[t(G,{})," \u7CBE\u54C1\u6B4C\u5355"]}),t("h2",{children:a==null?void 0:a.name}),t("h3",{children:a==null?void 0:a.copywriter})]})]}),o("section",{className:s("guide"),children:[t(R,{context:u,functionChildren:k}),t("ul",{children:g.map(e=>t("li",{className:P({"--active":e.name===n}),onClick:()=>p(e.name),children:e.name},e.id))})]}),t("section",{className:s("card"),children:C.map(e=>o("div",{className:s("item"),children:[t(A,{className:s("img"),src:S(e.imgUrl),icon:{size:"big",hoverDisplay:!0,placement:"bottom"},onClick:()=>_(e.id),onIconClick:()=>f(e.id)}),t("p",{onClick:()=>_(e.id),children:e.name})]},e.id))}),t("footer",{className:s("footer"),children:c>0?t(H,{current:y,total:c,onChange:(e,l)=>{m(e),d(e,l)},pageSize:100,showSizeChanger:!1}):null})]})};export{ce as default};
