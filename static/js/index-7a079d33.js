var J=Object.defineProperty,K=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var $=(s,e,t)=>e in s?J(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,v=(s,e)=>{for(var t in e||(e={}))L.call(e,t)&&$(s,t,e[t]);if(I)for(var t of I(e))P.call(e,t)&&$(s,t,e[t]);return s},C=(s,e)=>K(s,Q(e));var M=(s,e)=>{var t={};for(var o in s)L.call(s,o)&&e.indexOf(o)<0&&(t[o]=s[o]);if(s!=null&&I)for(var o of I(s))e.indexOf(o)<0&&P.call(s,o)&&(t[o]=s[o]);return t};import{r as h,R as n,u as N,g as W}from"./react-6a93a4b0.js";import{U as X,ad as Z,h as ee,k as te,aa as ne,aj as O}from"./vendor-2d6f78b2.js";import{u as se,S as d,T as j,v as ae,c as R,o as G,b as V,r as q,x as w,D as F,y as re,z as oe}from"./index-5e562a9a.js";import{L as D}from"./index-2e4d5f4f.js";import{u as ce}from"./react-redux-0a51a65b.js";import"./lodash-44bc1aaf.js";import"./react-router-dom-6c750f63.js";const ue="_song_e7i4c_1",ie="_song__header_e7i4c_4",le="_song__title_e7i4c_7",me="_song__wrapper_e7i4c_13",pe="_song__left_e7i4c_33",de="_song__img_e7i4c_38",_e="_song__footer_e7i4c_45",ge="_song__subtitle_e7i4c_50";var ye={song:ue,song__header:ie,song__title:le,song__wrapper:me,"song__best-match":"_song__best-match_e7i4c_18",song__left:pe,song__img:de,song__footer:_e,song__subtitle:ge};const U=({limit:s=20,type:e,keywords:t,currentType:o,setTotal:u})=>{const[a,r]=h.exports.useState(),[i,l]=h.exports.useState(1),m=h.exports.useMemo(()=>p(a),[e,a]);async function _(f=1,E=20){const T=(f-1)*E,g=await se({type:e,keywords:t,offset:T,limit:s});u(p(g.result)),r(g.result)}function c(f,E){l(f),_(f,E)}function p(f){return f&&f[{1:"songCount",100:"artistCount",10:"albumCount",1014:"videoCount",1e3:"playlistCount",1006:"songCount",1009:"djRadiosCount",1002:"userprofileCount"}[e]]||0}function k(f){const E=n.createElement("div",{className:B("empty")},"\u5F88\u62B1\u6B49\uFF0C\u672A\u80FD\u627E\u5230\u4E0E\u201C",n.createElement("span",null,t),"\u201D\u76F8\u5173\u7684\u4EFB\u4F55\u4FE1\u606F\u3002");return a?n.createElement(n.Fragment,null,f(a),m>s&&n.createElement("footer",{className:B("footer")},n.createElement(X,{total:m,showSizeChanger:!1,current:i,onChange:c}))):E}return h.exports.useEffect(()=>{e===o&&_()},[e,t]),{wrapEmpty:k}},Ee=s=>{const e=R("song",ye),_=s,{bestMatch:t}=_,o=M(_,["bestMatch"]),u=C(v({},o),{currentType:d.SONG,limit:100}),{wrapEmpty:a}=U(u),{push:r}=N(),i=ce(),l=[{title:"",key:"ordinal"},{title:"",key:"action"},{title:"\u97F3\u4E50\u6807\u9898",key:"name"},{title:"\u6B4C\u624B",render(c){return c.artists.map(p=>n.createElement("span",{key:p.id},p.name))}},{title:"\u4E13\u8F91",key:"album.name"},{title:"\u65F6\u957F",key:"duration",format:G}];function m(c,p){if(!t)return;const E=({album:()=>{const{id:g,name:y,picUrl:b,artist:S}=t[c][0],A=S.name;return{id:g,name:y,imgUrl:b,subtitle:A}},artist:()=>{const{id:g,name:y,picUrl:b}=t[c][0];return{id:g,name:y,imgUrl:b}},playlist:()=>{const{id:g,name:y,coverImgUrl:b}=t[c][0];return{id:g,name:y,imgUrl:b}},song:()=>{const{id:g,name:y,album:b}=t[c],S=b.picUrl;return{id:g,name:y,imgUrl:S}},concert:()=>{const{id:g,cover:y,title:b,time:S}=t[c][0],A=S.reduce((z,H)=>`${z}-${ee(H).format("M\u6708D\u65E5")}`,"").slice(1);return{id:g,name:b,imgUrl:y,subtitle:A}}}[c]||w)();function T(g,y){({album:()=>r(F.list(y,"album")),artist:()=>r(F.singer(y)),playlist:()=>r(F.list(y)),song:w,concert:w,orpheus:w})[g]()}return E?n.createElement("div",{key:p,className:e("best-match"),onClick:()=>T(c,E.id)},n.createElement("div",{className:e("left")},n.createElement(V,{src:q(E.imgUrl,100),className:e("img")}),n.createElement("div",null,n.createElement("div",null,E.name),n.createElement("div",{className:e("subtitle")},E.subtitle))),n.createElement(Z,null)):null}return a(c=>n.createElement("div",{className:e()},(t==null?void 0:t.orders)&&n.createElement("header",{className:e("header")},n.createElement("div",{className:e("title")},"\u6700\u4F73\u5339\u914D"),n.createElement("div",{className:e("wrapper")},t.orders.filter(p=>p!=="orpheus").map(m))),n.createElement(j,{columns:l,data:c.songs,onDoubleClick:p=>i(ae(c.songs[p].id))})))},fe=s=>{const e=C(v({},s),{currentType:d.SINGER}),{wrapEmpty:t}=U(e),{push:o}=N();function u(a){return a.map(r=>{const{picUrl:i,name:l,id:m}=r;return{id:m,imgUrl:i,name:l}})}return t(a=>n.createElement(D,{data:u(a.artists),onItemClick:({id:r})=>o(F.singer(r))}))},be=s=>{const e=C(v({},s),{currentType:d.ALBUM}),{wrapEmpty:t}=U(e),{push:o}=N();function u(a){return a.map(r=>{const{picUrl:i,name:l,artist:m,id:_}=r,{name:c,alias:p}=m,k=`${c}\uFF08${p.join(",")}\uFF09`;return{id:_,imgUrl:i,name:l,col2:k}})}return t(a=>n.createElement(D,{imgType:"extra",data:u(a.albums),onItemClick:({id:r})=>o(F.list(r,"album"))}))},he="_video_wgdnq_1",ve="_video__img_wgdnq_7",Ce="_video__description_wgdnq_12";var Y={video:he,video__img:ve,video__description:Ce,"--mv":"_--mv_wgdnq_31"};const x=R("video",Y),ke=s=>{const e=C(v({},s),{currentType:d.VIDEO,limit:21}),{wrapEmpty:t}=U(e),{push:o}=N();function u(a){o(F.playVideo(a))}return t(a=>n.createElement("div",{className:x()},a.videos.map(r=>n.createElement("div",{key:r.vid,className:x("item"),onClick:()=>u(r.vid)},n.createElement(V,{src:q(r.coverUrl,460,260),className:x("img")}),n.createElement("div",{className:x("description")},n.createElement("h2",{className:te({[Y["--mv"]]:r.type===0})},r.title),n.createElement("h3",null,"by ",r.creator.reduce((i,l)=>`${i},${l.userName}`,"").slice(1)))))))},Fe=s=>{const e=C(v({},s),{currentType:d.PLAYLIST}),{wrapEmpty:t}=U(e),{push:o}=N();function u(a){return a.map(r=>{const{coverImgUrl:i,name:l,trackCount:m,creator:_,id:c}=r,p=`${m}\u9996`,k=`by ${_.nickname}`;return{id:c,imgUrl:i,name:l,col2:p,col3:k}})}return t(a=>n.createElement(D,{data:u(a.playlists),onItemClick:({id:r})=>o(F.list(r))}))},Ue="_lyric_1o214_1";var Ne={lyric:Ue};const Se=s=>{const e=C(v({},s),{currentType:d.LYRIC}),{wrapEmpty:t}=U(e),o=[{title:"",key:"ordinal"},{title:"",key:"action"},{title:"\u97F3\u4E50\u6807\u9898",key:"name",render(u){return n.createElement(n.Fragment,null,n.createElement("div",null,u.name),n.createElement(re,{className:Ne.lyric},u.lyrics.txt))}},{title:"\u6B4C\u624B",render(u){return u.artists.map(a=>n.createElement("span",{key:a.id},a.name))}},{title:"\u4E13\u8F91",key:"album.name"},{title:"\u65F6\u957F",key:"duration",format:G}];return t(u=>n.createElement(j,{columns:o,data:u.songs}))},De=s=>{const e=C(v({},s),{currentType:d.RADIO}),{wrapEmpty:t}=U(e);function o(u){return u.map(a=>{const{picUrl:r,name:i,dj:l,id:m}=a,_=`by ${l.nickname}`;return{id:m,imgUrl:r,name:i,col3:_}})}return t(u=>n.createElement(D,{data:o(u.djRadios)}))},Ie=s=>{const e=C(v({},s),{currentType:d.USER,limit:20}),{wrapEmpty:t}=U(e),{push:o}=N();function u(a){return a.map(r=>{const{avatarUrl:i,nickname:l,description:m,userId:_}=r;return{id:_,imgUrl:i,name:l,col3:m}})}return t(a=>n.createElement(D,{imgType:"circle",data:u(a.userprofiles),onItemClick:({id:r})=>o(F.user(r))}))},B=R("search-result"),Pe=()=>{const[s,e]=h.exports.useState(0),[t,o]=h.exports.useState(0),[u,a]=h.exports.useState(),{search:r}=W(),i=h.exports.useMemo(()=>ne.parse(r.slice(1),{charset:"utf-8"}).keywords,[r]),l=[{type:d.SONG,key:"song",unit:"\u9996",tab:"\u5355\u66F2",component:Ee},{type:d.SINGER,key:"singer",unit:"\u4F4D",tab:"\u6B4C\u624B",component:fe},{type:d.ALBUM,key:"album",unit:"\u5F20",tab:"\u4E13\u8F91",component:be},{type:d.VIDEO,key:"video",unit:"\u4E2A",tab:"\u89C6\u9891",component:ke},{type:d.PLAYLIST,key:"playlist",unit:"\u4E2A",tab:"\u6B4C\u5355",component:Fe},{type:d.LYRIC,key:"lyric",unit:"\u9996",tab:"\u6B4C\u8BCD",component:Se},{type:d.RADIO,key:"radio",unit:"\u4E2A",tab:"\u4E3B\u64AD\u7535\u53F0",component:De},{type:d.USER,key:"user",unit:"\u4E2A",tab:"\u7528\u6237",component:Ie}],m=h.exports.useMemo(()=>l[t],[t]);function _(c){const p=l.findIndex(k=>k.key===c);p>-1&&o(p)}return h.exports.useEffect(()=>{(async()=>{const c=await oe(i);a(c.result)})()},[i]),n.createElement("div",{className:"search-result"},n.createElement("header",{className:B("header")},n.createElement("strong",null,i," "),`\u627E\u5230${s}${m.unit}${m.tab==="\u4E3B\u64AD\u7535\u53F0"?"\u7535\u53F0":m.tab}`),n.createElement(O,{onChange:_},l.map(c=>n.createElement(O.TabPane,{key:c.key,tab:c.tab},n.createElement(c.component,{type:m.type,keywords:i,setTotal:e,bestMatch:c.key==="song"?u:void 0})))))};export{Pe as default,B as getClass};
