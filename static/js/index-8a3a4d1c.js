import{r as m,R as e,n as k}from"./react-6ccb7aeb.js";import{s as x}from"./collector.module-b0079d28.js";import{b as v,r as p,c as N,N as O,o as T,i as D,t as J,O as M,P as R,Q as j,v as U}from"./index-d021fb92.js";import{J as y,K as L,h as Y,k as B,ar as w,a2 as C,S as I,aj as g,as as z,at as G}from"./vendor-d86b2c9c.js";import{I as H}from"./index-47263c05.js";import{a as K,u as Q}from"./react-redux-b7a88ea1.js";import"./lodash-44bc1aaf.js";import"./react-router-dom-9de2c748.js";const W=({id:u})=>{const t=N("collector",x),[s,i]=m.exports.useReducer(d,[]),n=m.exports.useRef(null);let c=-1;async function E(){var o;if(!u)return;const l=await O(u,c);i({type:c===-1?"reset":"add",payload:l.subscribers}),(o=n.current)==null||o.call(n,l.hasMore),c=l.time}function d(l,{type:r="reset",payload:o}){return r==="reset"?o:[...l,...o]}return m.exports.useEffect(()=>{E()},[u]),e.createElement(e.Fragment,null,e.createElement("div",{className:t()},s.map(l=>e.createElement("div",{key:l.userId,className:t("item")},e.createElement(v,{className:t("img"),src:p(l.avatarUrl,100)}),e.createElement("div",null,e.createElement("div",{className:t("title")},l.nickname),l.signature&&e.createElement("div",{className:t("subtitle")},l.signature))))),e.createElement(H,{ref:n,cb:E}))},f=({item:u,onItemClick:t})=>{const s=N("radio-list");return e.createElement("div",{className:s("item")},e.createElement("div",{className:s("ordinal")},u.serialNum),e.createElement(v,{className:s("cover"),icon:{hoverDisplay:!0},src:p(u.coverUrl,60),onClick:()=>t==null?void 0:t(u.mainSong.id),onIconClick:()=>t==null?void 0:t(u.mainSong.id)}),e.createElement("div",{className:s("name")},u.name),e.createElement("div",{className:s("play-count")},e.createElement(y,null)," ",u.trackCount),e.createElement("div",{className:s("like-count")},e.createElement(L,null)," ",u.likedCount),e.createElement("div",{className:s("date")},Y(u.createTime).format("YYYY-MM-DD")),e.createElement("div",{className:s("duration")},T(u.duration)))},ae=()=>{const u=N("list"),t=N("radio-list"),s=k(),i=m.exports.useMemo(()=>Number(s.id),[s.id]),n=m.exports.useMemo(()=>!!s.type,[s.type]),[c,E]=m.exports.useState([]),d=m.exports.useMemo(()=>c.sort((a,F)=>a.createTime-F.createTime).slice(0,3),[c]),l=m.exports.useMemo(()=>c.filter(a=>a.programFeeType===5),[c]),r=K(a=>a.djDetail),o=Q();async function A(){const a=await M(i);o(R(a.data))}async function h(){const a=await j(i);E(a.programs)}async function b(a){o(U(a))}function P(){var a;return e.createElement(e.Fragment,null,e.createElement("div",{className:u("user-info")},e.createElement("img",{src:r.dj&&J(p(r.dj.avatarUrl,30)),alt:"avatar"}),e.createElement("a",null,(a=r.dj)==null?void 0:a.nickname)),e.createElement("div",{className:u("control")},e.createElement(D,{compose:!0}),e.createElement(D,null,e.createElement(I,null),"\u5DF2\u8BA2\u9605(",r.subCount,")"),e.createElement(D,null,e.createElement(C,null),"\u5206\u4EAB(",r.shareCount,")")),e.createElement("div",{className:t("tag")},e.createElement("span",null,r.category),e.createElement("strong",null,r.desc)))}function S(){var a,F;return e.createElement(e.Fragment,null,e.createElement("div",{className:t("price")},"\xA5",(((a=r==null?void 0:r.feeInfo)==null?void 0:a.originalPrice)||0)/100),e.createElement("div",{className:t("buttons")},e.createElement("button",{className:B(t("button"),"--bg")},e.createElement(w,null),"\u7ACB\u5373\u8D2D\u4E70"),e.createElement("button",{className:B(t("button"),"--border")},e.createElement(y,null),"\u514D\u8D39\u8BD5\u542C"),e.createElement(D,null,e.createElement(C,null),"\u5206\u4EAB(175)")),e.createElement("div",{className:t("slogan")},(F=r.feeInfo)==null?void 0:F.slogan),e.createElement("small",{className:t("brief")},"\u6700\u65B0\u4E0A\u67B6"))}return m.exports.useEffect(()=>{Number.isNaN(i)||(A(),h())},[i]),e.createElement("div",{className:u()},e.createElement("header",{className:u("header")},e.createElement(v,{className:u("img"),src:r.picUrl&&p(r.picUrl,200)}),e.createElement("div",{className:u("right")},e.createElement("div",{className:u("title")},e.createElement("span",null,n?"\u4ED8\u8D39\u7CBE\u54C1":"\u7535\u53F0"),e.createElement("strong",null,r.name)),n?S():P())),e.createElement("section",{className:u("tabs")},e.createElement(g,null,n&&e.createElement(g.TabPane,{tab:"\u8BE6\u60C5",key:"0"},e.createElement("div",{className:t("detail")},e.createElement("h3",{className:t("detail-title")},"\u7535\u53F0\u5185\u5BB9\u7B80\u4ECB"),e.createElement("p",null,r.desc),d.length>0&&e.createElement(e.Fragment,null,e.createElement("h3",{className:t("detail-title")},"\u6700\u8FD1\u66F4\u65B0"),d.map(a=>e.createElement(f,{key:a.id,item:a,onItemClick:b}))),l.length>0&&e.createElement(e.Fragment,null,e.createElement("h3",{className:t("detail-title")},"\u514D\u8D39\u8BD5\u542C >"),l.map(a=>e.createElement(f,{key:a.id,item:a,onItemClick:b}))),e.createElement("h3",{className:B(t("detail-title"),t("detail-notice"))},"\u8D2D\u4E70\u987B\u77E5"),e.createElement("p",null,"1. \u672C\u97F3\u9891\u4E3A\u4ED8\u8D39\u8BA2\u9605\u4EA7\u54C1\uFFE512.9/12\u671F\uFF0C\u8D2D\u4E70\u6210\u529F\u540E\u5373\u53EF\u7545\u542C/\u4E0B\u8F7D",e.createElement("br",null),"2. \u8BF7\u5728\u7F51\u6613\u4E91\u97F3\u4E50\u624B\u673AAPP\u652F\u4ED8\u8D2D\u4E70\uFF0C\u8D2D\u4E70\u540E\u652F\u6301\u79FB\u52A8\u3001PC\u3001Web\u7B49\u7AEF\u6536\u542C",e.createElement("br",null),"3. \u8D2D\u4E70\u6210\u529F\u540E\u4E0D\u53EF\u9000\u6B3E\uFF0C\u540C\u65F6\u4E0D\u652F\u6301\u8F6C\u8BA9\uFF0C\u656C\u8BF7\u8C05\u89E3\uFF1B",e.createElement("br",null),"4. \u8D2D\u4E70\u8FC7\u7A0B\u9047\u5230\u4EFB\u4F55\u95EE\u9898\uFF0C\u8BF7\u79C1\u4FE1\u8054\u7CFB@\u4E91\u97F3\u4E50\u5BA2\u670D"))),e.createElement(g.TabPane,{tab:"\u8282\u76EE",key:"1"},e.createElement("div",{className:t("control")},e.createElement("div",null,"\u5171",r.programCount,"\u671F"),e.createElement("div",{className:t("control-right")},e.createElement("strong",null,"\u6392\u5E8F"),e.createElement(z,{className:t("icon")}),e.createElement(G,{className:t("icon")}))),c.map(a=>e.createElement(f,{key:a.id,item:a,onItemClick:b}))),!n&&e.createElement(g.TabPane,{tab:"\u8BA2\u9605\u8005",key:"3"},e.createElement(W,{id:i})))))};export{ae as default};
