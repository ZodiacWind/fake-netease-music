import{r as a,R as e}from"./react-69194784.js";import{i as N,at as D,T as R,c as w,au as M}from"./index-a8385452.js";import{C as G}from"./index-87c26849.js";import{d as T}from"./lodash-16b1923a.js";import{I as U}from"./index-826a65f3.js";import"./vendor-441fcb21.js";import"./react-router-dom-fbac4128.js";import"./react-redux-9f5c3214.js";const P=()=>{const s=w("cloud-music");a.exports.useRef(null);const[f,E]=a.exports.useReducer(g,[]),[A,x]=a.exports.useState(0),[c,y]=a.exports.useState(0),[n,C]=a.exports.useState(0),[k,S]=a.exports.useState(""),F=a.exports.useMemo(()=>c===0?0:n*100/c,[n,c]);let u=0;const i=30,o=a.exports.useRef(null),I=T(r=>{S(r.currentTarget.value)},500);async function m(){var p;const r=await M(u,i),{data:t,maxSize:l,size:h,count:B,hasMore:b}=r,j=u===0?"reset":"add",v=t.map(z=>z.simpleSong);E({type:j,payload:v}),y(d(l)),C(d(h)),x(B),(p=o.current)==null||p.call(o,b),u+=i}function g(r,t){return t.type==="add"?[...r,...t.payload]:t.payload}function d(r){try{let t=BigInt(r);const l=BigInt(1024);return t*=BigInt(10),t/=l**BigInt(3),Number(t)/10}catch(t){return console.error(t),0}}return a.exports.useEffect(()=>{m()},[]),e.createElement("div",null,e.createElement("header",{className:s("header")},e.createElement("div",{className:s("capacity")},e.createElement("span",{className:s("capacity-title")},"\u4E91\u76D8\u5BB9\u91CF"),e.createElement("div",{className:s("ruler")},e.createElement("div",{style:{width:`${F}%`}})),e.createElement("span",{className:s("capacity-ratio")},n,"G/",c,"G"),e.createElement("span",{className:s("capacity-description")},"\u6B4C\u66F2\u6C38\u4E45\u4FDD\u5B58\uFF0C\u968F\u65F6\u968F\u5730\u591A\u7AEF\u7545\u542C")),e.createElement("div",{className:s("control")},e.createElement(N,{compose:!0}),e.createElement(D,{placeholder:"\u641C\u7D22\u4E91\u76D8\u97F3\u4E50",onInput:I}))),e.createElement(R,{columns:G,data:f}),e.createElement(U,{ref:o,cb:m}))};export{P as default};
