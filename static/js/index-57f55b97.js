import{r as o,R as e,u as w}from"./react-6ccb7aeb.js";import{ad as M,ae as U,U as D,af as L,D as T,t as O,r as I,b as z,c as S,K as A}from"./index-d021fb92.js";import{ad as B,aw as R,k,U as G,ax as H}from"./vendor-d86b2c9c.js";import{P as j}from"./index-84ed5fbf.js";import{u as F}from"./react-redux-b7a88ea1.js";import"./lodash-44bc1aaf.js";import"./react-router-dom-9de2c748.js";const K=()=>{const[s,E]=o.exports.useState([]),[g,v]=o.exports.useState(),[r,C]=o.exports.useState(0),[u,p]=o.exports.useState(1),[a,n]=o.exports.useState("\u5168\u90E8");function i(m){return m.map(_=>{const{id:f,name:d,coverImgUrl:x}=_;return{id:f,name:d,imgUrl:x}})}async function c(m=1,_=100){const f=(m-1)*_,d=await M({cat:a,offset:f,limit:_});E(i(d.playlists)),C(d.total)}async function N(){const m=await D(a);v(m.playlists[0])}return o.exports.useEffect(()=>{p(1),c(),N()},[a]),{topPlaylist:s,total:r,current:u,setCurrent:p,loadTopPlaylist:c,topPlaylistHighquality:g,cat:a,setCat:n}};function J(s){const[E,g]=o.exports.useState([]),v=e.createElement(e.Fragment,null,s==="\u5168\u90E8"?"\u5168\u90E8\u6B4C\u5355":s,e.createElement(B,null));return o.exports.useEffect(()=>{(async()=>{const r=await U(),C=Object.keys(r.categories).map(u=>{const p=r.categories[u],a=[],n=Number(u),i={data:a,name:p};return r.sub.forEach(c=>{c.category===n&&i.data.push(c)}),i});g(C)})()},[]),{buttonContext:v,allMusicCategory:E}}const Q="_popover_1ff6m_1",V="_popover__header_1ff6m_4",W="_popover__item_1ff6m_27",X="_popover__left_1ff6m_35",Y="_popover__right_1ff6m_43",Z="_popover__label_1ff6m_48";var b={popover:Q,popover__header:V,"--active":"_--active_1ff6m_19",popover__item:W,popover__left:X,popover__right:Y,popover__label:Z};const ne=()=>{const s=S("music-list"),[E,g]=o.exports.useState([]),{topPlaylist:v,total:r,current:C,setCurrent:u,loadTopPlaylist:p,topPlaylistHighquality:a,cat:n,setCat:i}=K(),{push:c}=w(),N=F(),{buttonContext:m,allMusicCategory:_}=J(n);function f(t){c(T.list(t))}function d(t){N(A(t))}function x(t){const l=S("popover",b);function P(y){i(y),t(!1)}return e.createElement("div",{className:l()},e.createElement("header",{className:l("header")},e.createElement("button",{className:k({[b["--active"]]:n==="\u5168\u90E8"}),onClick:()=>P("\u5168\u90E8")},"\u5168\u90E8\u6B4C\u5355")),_.map(y=>e.createElement("section",{key:y.name,className:l("item")},e.createElement("div",{className:l("left")},e.createElement(H,null),e.createElement("span",null,y.name)),e.createElement("div",{className:l("right")},y.data.map(h=>e.createElement("div",{key:h.name,className:k(l("label"),{[b["--active"]]:h.name===n}),onClick:()=>P(h.name)},e.createElement("span",null,h.name),h.hot&&e.createElement("strong",null,"HOT")))))))}return o.exports.useEffect(()=>{(async()=>{const t=await L();g(t.tags)})()},[]),e.createElement("div",{className:s()},e.createElement("header",{className:s("banner"),onClick:()=>c(T.excellentList(n))},(a==null?void 0:a.coverImgUrl)&&e.createElement("img",{src:O(I(a.coverImgUrl,300)),alt:"banner"}),e.createElement("div",{className:s("banner-right")},e.createElement("button",null,e.createElement(R,null)," \u7CBE\u54C1\u6B4C\u5355"),e.createElement("h2",null,a==null?void 0:a.name),e.createElement("h3",null,a==null?void 0:a.copywriter))),e.createElement("section",{className:s("guide")},e.createElement(j,{context:m,functionChildren:x}),e.createElement("ul",null,E.map(t=>e.createElement("li",{key:t.id,className:k({"--active":t.name===n}),onClick:()=>i(t.name)},t.name)))),e.createElement("section",{className:s("card")},v.map(t=>e.createElement("div",{key:t.id,className:s("item")},e.createElement(z,{className:s("img"),src:I(t.imgUrl),icon:{size:"big",hoverDisplay:!0,placement:"bottom"},onClick:()=>f(t.id),onIconClick:()=>d(t.id)}),e.createElement("p",{onClick:()=>f(t.id)},t.name)))),e.createElement("footer",{className:s("footer")},r>0?e.createElement(G,{current:C,total:r,onChange:(t,l)=>{u(t),p(t,l)},pageSize:100,showSizeChanger:!1}):null))};export{ne as default};
