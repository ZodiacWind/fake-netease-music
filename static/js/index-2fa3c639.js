import{r as a,R as e}from"./react-8de69987.js";import{i as R,at as b,T as w,c as M,au as G}from"./index-4de405b4.js";import{C as T}from"./index-a839f1b4.js";import{d as U}from"./lodash-70433db2.js";import{I as A}from"./index-3b7fc9d8.js";import"./vendor-a5ef6589.js";import"./react-router-dom-0278a61d.js";import"./react-redux-3330aec9.js";const P=()=>{const s=M("cloud-music");a.exports.useRef(null);const[E,f]=a.exports.useReducer(g,[]),[k,y]=a.exports.useState(0),[o,x]=a.exports.useState(0),[n,C]=a.exports.useState(0),[K,S]=a.exports.useState(""),F=a.exports.useMemo(()=>o===0?0:n*100/o,[n,o]);let u=0;const i=30,c=a.exports.useRef(null),I=U(r=>{S(r.currentTarget.value)},500);async function m(){var d;const r=await G(u,i),{data:t,maxSize:l,size:B,count:h,hasMore:z}=r,N=u===0?"reset":"add",v=t.map(D=>D.simpleSong);f({type:N,payload:v}),x(p(l)),C(p(B)),y(h),(d=c.current)==null||d.call(c,z),u+=i}function g(r,t){return t.type==="add"?[...r,...t.payload]:t.payload}function p(r){try{let t=BigInt(r);const l=BigInt(1024);return t*=BigInt(10),t/=l**BigInt(3),Number(t)/10}catch(t){return console.error(t),0}}return a.exports.useEffect(()=>{m()},[]),e.createElement("div",null,e.createElement("header",{className:s("header")},e.createElement("div",{className:s("capacity")},e.createElement("span",{className:s("capacity-title")},"\u4E91\u76D8\u5BB9\u91CF"),e.createElement("div",{className:s("ruler")},e.createElement("div",{style:{width:`${F}%`}})),e.createElement("span",{className:s("capacity-ratio")},n,"G/",o,"G"),e.createElement("span",{className:s("capacity-description")},"\u6B4C\u66F2\u6C38\u4E45\u4FDD\u5B58\uFF0C\u968F\u65F6\u968F\u5730\u591A\u7AEF\u7545\u542C")),e.createElement("div",{className:s("control")},e.createElement(R,{compose:!0}),e.createElement(b,{placeholder:"\u641C\u7D22\u4E91\u76D8\u97F3\u4E50",onInput:I}))),e.createElement(w,{columns:T,data:E}),e.createElement(A,{ref:c,cb:m}))};export{P as default};
