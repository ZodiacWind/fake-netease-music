var J=Object.defineProperty,K=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var L=(s,e,t)=>e in s?J(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,v=(s,e)=>{for(var t in e||(e={}))$.call(e,t)&&L(s,t,e[t]);if(D)for(var t of D(e))j.call(e,t)&&L(s,t,e[t]);return s},C=(s,e)=>K(s,Q(e));var M=(s,e)=>{var t={};for(var o in s)$.call(s,o)&&e.indexOf(o)<0&&(t[o]=s[o]);if(s!=null&&D)for(var o of D(s))e.indexOf(o)<0&&j.call(s,o)&&(t[o]=s[o]);return t};import{r as h,R as n,u as S,j as W}from"./react-cb61e8c1.js";import{U as X,ad as Z,h as ee,k as te,aa as ne,aj as P}from"./vendor-b86105ba.js";import{t as se,S as d,T as O,u as ae,c as B,o as G,b as q,r as Y,v as I,D as U,x as re,y as oe}from"./index-7638329a.js";import{L as x}from"./index-3e44426f.js";import{u as ce}from"./react-redux-35258e53.js";import"./lodash-0d4875ad.js";import"./react-router-dom-23ef9bd5.js";const ue="_song_e7i4c_1",ie="_song__header_e7i4c_4",le="_song__title_e7i4c_7",me="_song__wrapper_e7i4c_13",pe="_song__left_e7i4c_33",de="_song__img_e7i4c_38",_e="_song__footer_e7i4c_45",ge="_song__subtitle_e7i4c_50";var ye={song:ue,song__header:ie,song__title:le,song__wrapper:me,"song__best-match":"_song__best-match_e7i4c_18",song__left:pe,song__img:de,song__footer:_e,song__subtitle:ge};const F=({limit:s=20,type:e,keywords:t,currentType:o,setTotal:r})=>{const[a,c]=h.exports.useState(),[m,p]=h.exports.useState(1),i=h.exports.useMemo(()=>l(a),[e,a]);async function _(b=1,E=20){const T=(b-1)*E,g=await se({type:e,keywords:t,offset:T,limit:s});r(l(g.result)),c(g.result)}function u(b,E){p(b),_(b,E)}function l(b){return b&&b[{1:"songCount",100:"artistCount",10:"albumCount",1014:"videoCount",1e3:"playlistCount",1006:"songCount",1009:"djRadiosCount",1002:"userprofileCount"}[e]]||0}function k(b){const E=n.createElement("div",{className:R("empty")},"\u5F88\u62B1\u6B49\uFF0C\u672A\u80FD\u627E\u5230\u4E0E\u201C",n.createElement("span",null,t),"\u201D\u76F8\u5173\u7684\u4EFB\u4F55\u4FE1\u606F\u3002");return a?n.createElement(n.Fragment,null,b(a),i>s&&n.createElement("footer",{className:R("footer")},n.createElement(X,{total:i,showSizeChanger:!1,current:m,onChange:u}))):E}return h.exports.useEffect(()=>{e===o&&_()},[e,t]),{wrapEmpty:k}},Ee=s=>{const e=B("song",ye),_=s,{bestMatch:t}=_,o=M(_,["bestMatch"]),r=C(v({},o),{currentType:d.SONG,limit:100}),{wrapEmpty:a}=F(r),{push:c}=S(),m=ce(),p=[{title:"",key:"ordinal"},{title:"",key:"action"},{title:"\u97F3\u4E50\u6807\u9898",key:"name"},{title:"\u6B4C\u624B",render(u){return u.artists.map(l=>n.createElement("span",{key:l.id},l.name))}},{title:"\u4E13\u8F91",key:"album.name"},{title:"\u65F6\u957F",key:"duration",format:G}];function i(u,l){if(!t)return;const E=({album:()=>{const{id:g,name:y,picUrl:f,artist:N}=t[u][0],A=N.name;return{id:g,name:y,imgUrl:f,subtitle:A}},artist:()=>{const{id:g,name:y,picUrl:f}=t[u][0];return{id:g,name:y,imgUrl:f}},playlist:()=>{const{id:g,name:y,coverImgUrl:f}=t[u][0];return{id:g,name:y,imgUrl:f}},song:()=>{const{id:g,name:y,album:f}=t[u],N=f.picUrl;return{id:g,name:y,imgUrl:N}},concert:()=>{const{id:g,cover:y,title:f,time:N}=t[u][0],A=N.reduce((z,H)=>`${z}-${ee(H).format("M\u6708D\u65E5")}`,"").slice(1);return{id:g,name:f,imgUrl:y,subtitle:A}}}[u]||I)();function T(g,y){({album:()=>c(U.list(y,"album")),artist:()=>c(U.singer(y)),playlist:()=>c(U.list(y)),song:I,concert:I,orpheus:I})[g]()}return E?n.createElement("div",{key:l,className:e("best-match"),onClick:()=>T(u,E.id)},n.createElement("div",{className:e("left")},n.createElement(q,{src:Y(E.imgUrl,100),className:e("img")}),n.createElement("div",null,n.createElement("div",null,E.name),n.createElement("div",{className:e("subtitle")},E.subtitle))),n.createElement(Z,null)):null}return a(u=>n.createElement("div",{className:e()},(t==null?void 0:t.orders)&&n.createElement("header",{className:e("header")},n.createElement("div",{className:e("title")},"\u6700\u4F73\u5339\u914D"),n.createElement("div",{className:e("wrapper")},t.orders.filter(l=>l!=="orpheus").map(i))),n.createElement(O,{columns:p,data:u.songs,onDoubleClick:l=>m(ae(u.songs[l].id))})))},be=s=>{const e=C(v({},s),{currentType:d.SINGER}),{wrapEmpty:t}=F(e),{push:o}=S();function r(a){return a.map(c=>{const{picUrl:m,name:p,id:i}=c;return{id:i,imgUrl:m,name:p}})}return t(a=>n.createElement(x,{data:r(a.artists),onItemClick:({id:c})=>o(U.singer(c))}))},fe=s=>{const e=C(v({},s),{currentType:d.ALBUM}),{wrapEmpty:t}=F(e),{push:o}=S();function r(a){return a.map(c=>{const{picUrl:m,name:p,artist:i,id:_}=c,{name:u,alias:l}=i,k=`${u}\uFF08${l.join(",")}\uFF09`;return{id:_,imgUrl:m,name:p,col2:k}})}return t(a=>n.createElement(x,{imgType:"extra",data:r(a.albums),onItemClick:({id:c})=>o(U.list(c,"album"))}))},he="_video_wgdnq_1",ve="_video__img_wgdnq_7",Ce="_video__description_wgdnq_12";var V={video:he,video__img:ve,video__description:Ce,"--mv":"_--mv_wgdnq_31"};const w=B("video",V),ke=s=>{const e=C(v({},s),{currentType:d.VIDEO,limit:21}),{wrapEmpty:t}=F(e);return t(o=>n.createElement("div",{className:w()},o.videos.map(r=>n.createElement("div",{key:r.vid,className:w("item")},n.createElement(q,{src:Y(r.coverUrl,460,260),className:w("img")}),n.createElement("div",{className:w("description")},n.createElement("h2",{className:te({[V["--mv"]]:r.type===0})},r.title),n.createElement("h3",null,"by ",r.creator.reduce((a,c)=>`${a},${c.userName}`,"").slice(1)))))))},Fe=s=>{const e=C(v({},s),{currentType:d.PLAYLIST}),{wrapEmpty:t}=F(e),{push:o}=S();function r(a){return a.map(c=>{const{coverImgUrl:m,name:p,trackCount:i,creator:_,id:u}=c,l=`${i}\u9996`,k=`by ${_.nickname}`;return{id:u,imgUrl:m,name:p,col2:l,col3:k}})}return t(a=>n.createElement(x,{data:r(a.playlists),onItemClick:({id:c})=>o(U.list(c))}))},Ue="_lyric_1o214_1";var Ne={lyric:Ue};const Se=s=>{const e=C(v({},s),{currentType:d.LYRIC}),{wrapEmpty:t}=F(e),o=[{title:"",key:"ordinal"},{title:"",key:"action"},{title:"\u97F3\u4E50\u6807\u9898",key:"name",render(r){return n.createElement(n.Fragment,null,n.createElement("div",null,r.name),n.createElement(re,{className:Ne.lyric},r.lyrics.txt))}},{title:"\u6B4C\u624B",render(r){return r.artists.map(a=>n.createElement("span",{key:a.id},a.name))}},{title:"\u4E13\u8F91",key:"album.name"},{title:"\u65F6\u957F",key:"duration",format:G}];return t(r=>n.createElement(O,{columns:o,data:r.songs}))},xe=s=>{const e=C(v({},s),{currentType:d.RADIO}),{wrapEmpty:t}=F(e);function o(r){return r.map(a=>{const{picUrl:c,name:m,dj:p,id:i}=a,_=`by ${p.nickname}`;return{id:i,imgUrl:c,name:m,col3:_}})}return t(r=>n.createElement(x,{data:o(r.djRadios)}))},De=s=>{const e=C(v({},s),{currentType:d.USER,limit:20}),{wrapEmpty:t}=F(e),{push:o}=S();function r(a){return a.map(c=>{const{avatarUrl:m,nickname:p,description:i,userId:_}=c;return{id:_,imgUrl:m,name:p,col3:i}})}return t(a=>n.createElement(x,{imgType:"circle",data:r(a.userprofiles),onItemClick:({id:c})=>o(U.user(c))}))},R=B("search-result"),Le=()=>{const[s,e]=h.exports.useState(0),[t,o]=h.exports.useState(0),[r,a]=h.exports.useState(),{search:c}=W(),m=h.exports.useMemo(()=>ne.parse(c.slice(1),{charset:"utf-8"}).keywords,[c]),p=[{type:d.SONG,key:"song",unit:"\u9996",tab:"\u5355\u66F2",component:Ee},{type:d.SINGER,key:"singer",unit:"\u4F4D",tab:"\u6B4C\u624B",component:be},{type:d.ALBUM,key:"album",unit:"\u5F20",tab:"\u4E13\u8F91",component:fe},{type:d.VIDEO,key:"video",unit:"\u4E2A",tab:"\u89C6\u9891",component:ke},{type:d.PLAYLIST,key:"playlist",unit:"\u4E2A",tab:"\u6B4C\u5355",component:Fe},{type:d.LYRIC,key:"lyric",unit:"\u9996",tab:"\u6B4C\u8BCD",component:Se},{type:d.RADIO,key:"radio",unit:"\u4E2A",tab:"\u4E3B\u64AD\u7535\u53F0",component:xe},{type:d.USER,key:"user",unit:"\u4E2A",tab:"\u7528\u6237",component:De}],i=h.exports.useMemo(()=>p[t],[t]);function _(u){const l=p.findIndex(k=>k.key===u);l>-1&&o(l)}return h.exports.useEffect(()=>{(async()=>{const u=await oe(m);a(u.result)})()},[m]),n.createElement("div",{className:"search-result"},n.createElement("header",{className:R("header")},n.createElement("strong",null,m," "),`\u627E\u5230${s}${i.unit}${i.tab==="\u4E3B\u64AD\u7535\u53F0"?"\u7535\u53F0":i.tab}`),n.createElement(P,{onChange:_},p.map(u=>n.createElement(P.TabPane,{key:u.key,tab:u.tab},n.createElement(u.component,{type:i.type,keywords:m,setTotal:e,bestMatch:u.key==="song"?r:void 0})))))};export{Le as default,R as getClass};
