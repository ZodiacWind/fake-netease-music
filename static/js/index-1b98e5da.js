import{r as d,g as s,F as h,j as e,p as O}from"./react-7f918845.js";import{s as T}from"./collector.module-b0079d28.js";import{b as C,r as g,c as b,N as J,o as M,i as E,t as k,O as R,P as U,Q as L,v as Y}from"./index-b2307066.js";import{J as y,K as w,h as I,k as f,ar as z,a2 as A,S as G,aj as N,as as H,at as K}from"./vendor-2e679db4.js";import{I as Q}from"./index-6dc6c590.js";import{a as W,u as q}from"./react-redux-8df6583b.js";import"./lodash-44bc1aaf.js";import"./react-router-dom-102d9908.js";const V=({id:u})=>{const a=b("collector",T),[c,m]=d.exports.useReducer(D,[]),n=d.exports.useRef(null);let l=-1;async function F(){var o;if(!u)return;const t=await J(u,l);m({type:l===-1?"reset":"add",payload:t.subscribers}),(o=n.current)==null||o.call(n,t.hasMore),l=t.time}function D(t,{type:i="reset",payload:o}){return i==="reset"?o:[...t,...o]}return d.exports.useEffect(()=>{F()},[u]),s(h,{children:[e("div",{className:a(),children:c.map(t=>s("div",{className:a("item"),children:[e(C,{className:a("img"),src:g(t.avatarUrl,100)}),s("div",{children:[e("div",{className:a("title"),children:t.nickname}),t.signature&&e("div",{className:a("subtitle"),children:t.signature})]})]},t.userId))}),e(Q,{ref:n,cb:F})]})},v=({item:u,onItemClick:a})=>{const c=b("radio-list");return s("div",{className:c("item"),children:[e("div",{className:c("ordinal"),children:u.serialNum}),e(C,{className:c("cover"),icon:{hoverDisplay:!0},src:g(u.coverUrl,60),onClick:()=>a==null?void 0:a(u.mainSong.id),onIconClick:()=>a==null?void 0:a(u.mainSong.id)}),e("div",{className:c("name"),children:u.name}),s("div",{className:c("play-count"),children:[e(y,{})," ",u.trackCount]}),s("div",{className:c("like-count"),children:[e(w,{})," ",u.likedCount]}),e("div",{className:c("date"),children:I(u.createTime).format("YYYY-MM-DD")}),e("div",{className:c("duration"),children:M(u.duration)})]})},ue=()=>{const u=b("list"),a=b("radio-list"),c=O(),m=d.exports.useMemo(()=>Number(c.id),[c.id]),n=d.exports.useMemo(()=>!!c.type,[c.type]),[l,F]=d.exports.useState([]),D=d.exports.useMemo(()=>l.sort((r,p)=>r.createTime-p.createTime).slice(0,3),[l]),t=d.exports.useMemo(()=>l.filter(r=>r.programFeeType===5),[l]),i=W(r=>r.djDetail),o=q();async function P(){const r=await R(m);o(U(r.data))}async function S(){const r=await L(m);F(r.programs)}async function B(r){o(Y(r))}function x(){var r;return s(h,{children:[s("div",{className:u("user-info"),children:[e("img",{src:i.dj&&k(g(i.dj.avatarUrl,30)),alt:"avatar"}),e("a",{children:(r=i.dj)==null?void 0:r.nickname})]}),s("div",{className:u("control"),children:[e(E,{compose:!0}),s(E,{children:[e(G,{}),"\u5DF2\u8BA2\u9605(",i.subCount,")"]}),s(E,{children:[e(A,{}),"\u5206\u4EAB(",i.shareCount,")"]})]}),s("div",{className:a("tag"),children:[e("span",{children:i.category}),e("strong",{children:i.desc})]})]})}function j(){var r,p;return s(h,{children:[s("div",{className:a("price"),children:["\xA5",(((r=i==null?void 0:i.feeInfo)==null?void 0:r.originalPrice)||0)/100]}),s("div",{className:a("buttons"),children:[s("button",{className:f(a("button"),"--bg"),children:[e(z,{}),"\u7ACB\u5373\u8D2D\u4E70"]}),s("button",{className:f(a("button"),"--border"),children:[e(y,{}),"\u514D\u8D39\u8BD5\u542C"]}),s(E,{children:[e(A,{}),"\u5206\u4EAB(175)"]})]}),e("div",{className:a("slogan"),children:(p=i.feeInfo)==null?void 0:p.slogan}),e("small",{className:a("brief"),children:"\u6700\u65B0\u4E0A\u67B6"})]})}return d.exports.useEffect(()=>{Number.isNaN(m)||(P(),S())},[m]),s("div",{className:u(),children:[s("header",{className:u("header"),children:[e(C,{className:u("img"),src:i.picUrl&&g(i.picUrl,200)}),s("div",{className:u("right"),children:[s("div",{className:u("title"),children:[e("span",{children:n?"\u4ED8\u8D39\u7CBE\u54C1":"\u7535\u53F0"}),e("strong",{children:i.name})]}),n?j():x()]})]}),e("section",{className:u("tabs"),children:s(N,{children:[n&&e(N.TabPane,{tab:"\u8BE6\u60C5",children:s("div",{className:a("detail"),children:[e("h3",{className:a("detail-title"),children:"\u7535\u53F0\u5185\u5BB9\u7B80\u4ECB"}),e("p",{children:i.desc}),D.length>0&&s(h,{children:[e("h3",{className:a("detail-title"),children:"\u6700\u8FD1\u66F4\u65B0"}),D.map(r=>e(v,{item:r,onItemClick:B},r.id))]}),t.length>0&&s(h,{children:[e("h3",{className:a("detail-title"),children:"\u514D\u8D39\u8BD5\u542C >"}),t.map(r=>e(v,{item:r,onItemClick:B},r.id))]}),e("h3",{className:f(a("detail-title"),a("detail-notice")),children:"\u8D2D\u4E70\u987B\u77E5"}),s("p",{children:["1. \u672C\u97F3\u9891\u4E3A\u4ED8\u8D39\u8BA2\u9605\u4EA7\u54C1\uFFE512.9/12\u671F\uFF0C\u8D2D\u4E70\u6210\u529F\u540E\u5373\u53EF\u7545\u542C/\u4E0B\u8F7D",e("br",{}),"2. \u8BF7\u5728\u7F51\u6613\u4E91\u97F3\u4E50\u624B\u673AAPP\u652F\u4ED8\u8D2D\u4E70\uFF0C\u8D2D\u4E70\u540E\u652F\u6301\u79FB\u52A8\u3001PC\u3001Web\u7B49\u7AEF\u6536\u542C",e("br",{}),"3. \u8D2D\u4E70\u6210\u529F\u540E\u4E0D\u53EF\u9000\u6B3E\uFF0C\u540C\u65F6\u4E0D\u652F\u6301\u8F6C\u8BA9\uFF0C\u656C\u8BF7\u8C05\u89E3\uFF1B",e("br",{}),"4. \u8D2D\u4E70\u8FC7\u7A0B\u9047\u5230\u4EFB\u4F55\u95EE\u9898\uFF0C\u8BF7\u79C1\u4FE1\u8054\u7CFB@\u4E91\u97F3\u4E50\u5BA2\u670D"]})]})},"0"),s(N.TabPane,{tab:"\u8282\u76EE",children:[s("div",{className:a("control"),children:[s("div",{children:["\u5171",i.programCount,"\u671F"]}),s("div",{className:a("control-right"),children:[e("strong",{children:"\u6392\u5E8F"}),e(H,{className:a("icon")}),e(K,{className:a("icon")})]})]}),l.map(r=>e(v,{item:r,onItemClick:B},r.id))]},"1"),!n&&e(N.TabPane,{tab:"\u8BA2\u9605\u8005",children:e(V,{id:m})},"3")]})})]})};export{ue as default};
